# Nessun alias necessario: Apache servir√† i file direttamente dalla root
# Se vuoi, puoi aggiungere un Directory block per sicurezza
files:
  "/etc/httpd/conf.d/static-files.conf":
    mode: "644"
    owner: root
    group: root
    content: |
      <Directory "/var/app/current/">
          Options Indexes FollowSymLinks
          AllowOverride None
          Require all granted
      </Directory>

# Copia tutti i file nella root del deploy
container_commands:
  01_copy_static_files:
    command: |
      shopt -s nullglob
      if [ -d /opt/elasticbeanstalk/deployment/app_source_bundle/.ebextensions/files ]; then
        for f in /opt/elasticbeanstalk/deployment/app_source_bundle/.ebextensions/files/*; do
          cp "$f" /var/app/current/
        done
      else
        echo "Directory files/ non esiste, salto copia"
      fi
