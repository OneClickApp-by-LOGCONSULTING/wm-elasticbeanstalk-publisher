# Nessun alias necessario: Apache servir√† i file direttamente dalla root
# Se vuoi, puoi aggiungere un Directory block per sicurezza
files:
  "/etc/httpd/conf.d/static-files.conf":
    mode: "644"
    owner: root
    group: root
    content: |
      <Directory "/var/app/current/">
          Options Indexes FollowSymLinks
          AllowOverride None
          Require all granted
      </Directory>

# Copia tutti i file nella root del deploy
container_commands:
  01_copy_static_files:
    command: |
      echo "Look for Loader.io token files"
      shopt -s nullglob
      SRC_DIR="/var/app/staging/.ebextensions/files"
      if [ -d "$SRC_DIR" ]; then
        for f in "$SRC_DIR"/*; do
          echo "Copia $f in /var/app/current/"
          cp "$f" /var/app/current/
        done
      else
        echo "Directory $SRC_DIR non esiste, salto copia"
      fi
